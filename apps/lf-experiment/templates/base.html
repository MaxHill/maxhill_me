<!DOCTYPE html>
<html lang="en" data-theme="light">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>lf-experiment</title>

		<!-- Global CSS styles -->
		<link rel="stylesheet" href="/css/style.css">
	</head>
	<body>
		<main>
			{{template "content" .}}
		</main>

		<!-- Bundled JavaScript with web components -->
		<script type="module" src="/js/main.js"></script>

		<!-- Service Worker Registration -->
		<script>
			if ('serviceWorker' in navigator) {
				window.addEventListener('load', () => {
					navigator.serviceWorker.register('/serviceworker.js')
					.then(registration => {
						console.log('Service Worker registered:', registration.scope);
						})
						.catch(error => {
							console.error('Service Worker registration failed:', error);
							});
							});
							
							// Auto-reload when new service worker takes control
							let refreshing = false;
							navigator.serviceWorker.addEventListener('controllerchange', () => {
								if (!refreshing) {
									refreshing = true;
									console.log('Service Worker updated, reloading page...');
									window.location.reload();
								}
								});
							}
		</script>
	</body>
</html>
