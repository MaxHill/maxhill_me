---
import BaseLayout from "../../components/layouts/BaseLayout.astro";
import { getCollection, render } from "astro:content";

export async function getStaticPaths() {
  const docEntries = await getCollection('componentDocs');
  
  return docEntries.map((docsEntry) => {
    const tagName = docsEntry.id.split('/').slice(-2, -1)[0];
    
    return {
      params: { component: tagName.substring(2) },
      props: { entry: docsEntry }
    };
  });
}

const { component } = Astro.params;
const { entry } = Astro.props;

const { Content } = await render(entry);

const tagName = entry.id.split('/').slice(-2, -1)[0];

const componentName = tagName
  .split('-')
  .map(word => word.charAt(0).toUpperCase() + word.slice(1))
  .join(' ');

const title = componentName;
---

<BaseLayout title={title}>
  <main>
    <h1>{componentName}</h1>
    <Content components={{ script: Fragment }} />
  </main>
</BaseLayout>

<style>
  main {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }

  h1 {
    margin-bottom: 2rem;
  }
</style>
